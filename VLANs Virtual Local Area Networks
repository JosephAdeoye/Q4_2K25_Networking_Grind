# Campus Design - Access, Distribution and Core Layers
  - The campus LAN should be designed for scalability, performance and security
  - To aid in a best practice design process, the network topology is split into access, distribution and core layers
  - The layers have their own design principles and characteristics

# THE ACCESS LAYER
  - End hosts such as desktop computers, servers, and IP phones connect to the network at the access layer
  - It is designed to have a high port count at an affordable cost
  - Desktops typically have only one Network Interface Card (NIC), so they connect to one switch or Wireless Access Point
  - Servers will often have dual NICs and connect to a pair of redundant switches
  - Client access security measures are enabled at the Access Layer

# THE DISTRIBUTION LAYER
  - Access Layer switches uplink to Distribution Layer switches
  - The Distribution Layer switches serve as an aggregation point for the Access Layer and provide scalability
  - Distribution Layer switches are typically deployed in redundant pairs, with downstream Access Layer switches connected to both
  - End hosts are not typically connected here
  - Most software policy, such as QoS, is enabled at this layer

# THE CORE LAYER
  - Distribution Layer switches uplink to Core Layer switches
  - Core Layer switches are typically deployed in redundant pairs, with downstream Distribution Layer switches connected to both
  - Traffic between different parts of the campus network travels through the core, so it is designed for speed and resiliency
  - Software policy slows the switch down, so it should be avoided in the Core Layer

# Collapsed Distribution and Core
  - Smaller campuses do not need the scalability of three separate layers
  - In this case, a Collapsed Distribution and Core layer is used, where the Distribution and Core layer functions are performed on the same hardware device

WHY WE HAVE VLANS

# Router Operations
  - Routers operate at Layer 3 of the OSI stack
  - Hosts in separate IP subnets must send traffic via a router to communicate
  - Security rules on routers or firewalls can be used to easily control what traffic is allowed between different IP subnets at Layer 3
  - Routers do not forward broadcast traffic by default
  - They provide performance and security by splitting networks into smaller domains at Layer 3

# Switch Operations
  - Switches operate at Layer 2 of the OSI stack
  - They do forward broadcast traffic by default
  - By default, a campus switch network is one large broadcast domain
  - Switches flood broadcast traffic everywhere, including between different IP subnets
  - This raises performance and security concerns

# VLAN Virtual Local Area Networks
  - We can increase performance and security in the LAN by implementing VLANs on our switches
  - VLANs segment the LAN into separate broadcast domains at Layer 2
  - There is typically a one-to-one relationship between an IP subnet and a VLAN

# VLAN Access Ports
  - VLAN access ports are configured on switch interfaces where end hosts are plugged in
  - Access ports are configured with one specific VLAN
  - The configuration is all on the switch; the end host is not VLAN aware
  - Switches only allow traffic within the same VLAN

HOSTS IN THE SAME IP SEGMENT SHOULD BE IN THE SAME VLAN
HOSTS IN DIFFERENT IP SEGMENTS SHOULD BE IN THE SAME VLAN

# DEFAULT VLAN
  - All ports on a switch are by default in VLAN 1

# ACCESS PORT CONFIGURATION
  ENG vlan example
  - vlan 10
  - name ENG
  THEN YOU NEED TO ENTER THE INTERFACE VIEW OF THE INTERFACES YOU WANT TO ADD TO THIS VLAN
  - interface FastEthernet 0/1
  - switchport mode access
  - switchport access vlan 1o
  YOU CAN ALSO ADD A RANGE OF INTERFACES AT THE SAME TIME USING A RANGE
  - interface range FastEthernet 0/3 - 5
  - switchport mode access
  - switchport access vlan 10

  You can then use the
  - show vlan brief command to verify your configuration

# VLAN TRUNK PORTS
  - A trunk port allows more than one VLAN to pass through an interface
  - The protocol used for Trunk ports is Dot1Q
  - An access port carries traffic for one specific VLAN
  - Dot1Q trunks are configured on the links between switches where we need to carry traffic for multiple VLANs.


  ### 802.1Q Header (32 bits total)
  - **Tag Protocol Identifier (TPID)** â€“ 16 bits (`0x8100`) to indicate a VLAN-tagged frame.  
  - **Priority Code Point (PCP)** â€“ 3 bits, for QoS (IEEE 802.1p).  
  - **Drop Eligible Indicator (DEI)** â€“ 1 bit, indicates if frame can be dropped under congestion.  
  - **VLAN ID (VID)** â€“ 12 bits, identifies VLAN (range: 1â€“4094).  

  ---

  ### Key Notes
  - The tag is **added by a switch** when sending frames out a **trunk port**.  
  - The receiving switch uses the VLAN ID to forward the frame to the correct VLAN.  
  - When forwarding frames out of an **access port**, the switch **removes the tag** before sending it to the end host.  

  # Hypervisors - VLAN Aware Hosts
  - End hosts are typically members of only one VLAN and are not VLAN aware.
  - A special case is virtualised hosts, where there are virtual machines in different IP subnets on the host.
  - In this case, we need to trunk the VLANs down to the host

  ### The Native VLAN
  - The switch needs to know which VLAN to assign to any traffic which comes in untagged on a trunk port
  - This used to be required when a switch was connected to a hub. Hubs are layer 1 devices so are not VLAN aware
  - The Native VLAN is used for this
  - The default Native VLAN is VLAN 1
  - There are some security issues with using VLAN 1 as the native VLAN, so the best practice is to change it to an unused VLAN
  - The Native VLAN must match on both sides of a trunk for it to come up. 

  ðŸš— Analogy for Native VLAN: Traffic lanes (VLANs) on a highway

    Imagine a highway with different lanes (VLANs).

  - Each car (Ethernet frame) usually has a sticker (VLAN tag) showing which lane it belongs to.
  - But sometimes, a car comes without a sticker (untagged frame).
  - The Native VLAN is like the default lane for cars with no sticker.

  âœ… Why it exists:

  - Some devices (like old IP phones, management protocols, or non-VLAN-aware devices) may send untagged traffic.
  - The Native VLAN ensures that untagged frames donâ€™t get dropped, but instead have a home.
